- ## 全体アーキテクチャ
  - Core Concept Profile（語彙の核）
    - 日本独自 Concept（verbs / activityTypes / extensions 等）を定義
    - Domain に共通する語彙を集約
    - Pattern / Template は Core には原則置かない
    - ルールは Domain 側へ
  - Domain Template Profile（ebook / cbt / lms …）
    - 各TFのプロファイルを、「Domain Template Profile」と呼ぶ。
    - Statement Templates / Patterns を中心に定義
    - verb/activityType は Core または既存（ADL 等）を参照（再定義しない）
    - 参考）[https://adlnet.github.io/xapi-profiles/xapi-profiles-structure.html](https://adlnet.github.io/xapi-profiles/xapi-profiles-structure.html)
  - Catalog / Registry（運用補助）
    - Profile 間の依存・互換（例：ebook 1.0.0 は core 1.x を前提）
    - IRI 一覧、命名規則、廃止（deprecate）情報
    - ※仕様上必須ではないが、複数Profile運用で極めて有効

- ## Core構成
  - 役割: 組織独自のVerb、ActivityType、Extensionsを「定義」する場所。
  - 特徴: concepts がメイン。templates は基本的になし。既存(ADL等)のVerbは書かない。
  - ドキュメント/JSON-LD構成
    - 本プロファイルの位置づけ
    - 目的
    - 前提条件
    - 定義範囲
    - 本ドキュメント、JSON-LDの構成
    - メタ情報（JSON-LDにも記載する。統一フォーマットあり）
    - バージョン履歴（JSON-LDにも記載する。統一フォーマットあり）
    - Concepts（JSON-LDにも記載する）
    - 対象
    - 前提条件
    - Actor
    - Verb
    - ActivityType
    - Extention
      - 教科、学年、学習指導要領コードのプロパティ名を規定する
        - メタデータの記載ルール（キー）については今回議論しない
    - Context Category / Parent Activity 等の語彙　 →今回はスコープ外

  - #### ファイル: core/v1.0.0/profile.jsonld

```json
{
  "@context": "https://w3id.org/xapi/profiles/context",
  "id": "https://w3id.org/japan-xapi/profiles/core",
  "type": "Profile",
  "conformsTo": "https://w3id.org/xapi/profiles#1.0",
  "prefLabel": {
    "ja": "Japan xAPI Core Profile",
    "en": "Japan xAPI Core Profile"
  },
  "definition": {
    "ja": "日本の初等中等教育を主対象とする学習ログ（xAPI Statement）の共通語彙（Concept）を定義するコア・プロファイル。ebook/CBT/LMS等のドメイン別プロファイルは、本プロファイルのConceptおよび既存標準（例：ADL）を参照し、Statement Templateを定義する。"
  },
  "versions": [
    {
      "id": "https://w3id.org/japan-xapi/profiles/core/v1.0.0",
      "generatedAtTime": "2026-04-01"
    }
  ],
  "publisher": {
    "type": "Organization",
    "name": "ICT CONNECT 21 xAPI SWG"
  },

  // ▼【重要】ここは「新しく作る言葉」だけを書く。ADLの言葉は書かない。
  "concepts": [
    {
      "id": "https://w3id.org/japan-xapi/verbs/highlighted", // 新規Verbの定義例
      "inScheme": "https://w3id.org/japan-xapi/profiles/core/v1.0.0",
      "type": "Verb",
      "prefLabel": {
        "ja": "ハイライトした",
        "en": "highlighted"
      },
      "definition": {
        "ja": "テキストや画像の一部を強調表示する行為。",
        "en": "The act of highlighting a part of text or image."
      }
    },
    {
      "id": "https://w3id.org/japan-xapi/extensions/difficulty", // 新規Extensionの定義例
      "inScheme": "https://w3id.org/japan-xapi/profiles/core/v1.0.0",
      "type": "ContextExtension",
      "prefLabel": { "ja": "難易度" },
      "definition": { "ja": "学習コンテンツの難易度を示す（1-5など）。" }
    }
  ],
  "templates": [],
  "patterns": []
}
```

- ## 論点７）Domain構成
  - 役割: どのVerbを、どんな条件で使うかを「規定」する場所。
  - 特徴:
    - templates がメイン。concepts は空。ここでADLやCoreのVerbを参照する。
    - 各Domainプロファイルで共通で記述されると思われるlaunchedなども各Domainプロファイルに記述する。
  - ドキュメント/JSON-LD構成
    - 本プロファイルの位置づけ　 →各プロファイルで記述方針をそろえる
    - 目的　 →各プロファイルで記述方針をそろえる
    - 前提条件 →各プロファイルで同一記述？
    - 定義範囲
    - 本ドキュメント、JSON-LDの構成　 →各プロファイルで記述方針をそろえる
    - メタ情報（JSON-LDにも記載する。）→各プロファイルで記述方針をそろえる
    - バージョン履歴（JSON-LDにも記載する。）
    - StatementTemplate（JSON-LDに記載する。）
      - template id（IRI）
      - name / description
      - verb.id
        - 既存 ADL verb もここで参照して良い（再定義しない）
        - 初期スコープでのverbの分量について
          - verb選定に伴うverbの統合はしない
            - 鉛筆操作、消しゴム操作をまとめて、キャンバス操作にするなど（下位動詞を上位動詞でまとめない）
          - 現時点で細粒度を優先とする
      - object
        - objectType（Activity/Agent/Group/SubStatement…）
        - activityType（Core または外部の IRI を参照）
      - context
        - contextActivities（parent / grouping / category などの整理）
        - extensions（Core で定義した extension IRI を参照）
      - result
        - success / completion / score / response / duration
        - result.extensions
      - rules
        - 必須／任意、相互排他、条件付き必須など
    - Patterns（JSON-LDに記載する。）　 →今回はスコープ外
      - 複数 Template を束ねるルール
      - 例：「閲覧 → 解答 → 提出」の順序や、同一 registration 内での整合
    - Domain固有 concepts（JSON-LDに記載する。）　 →今回はスコープ外
      - その Concept が 複数 Domain で共通 → Core へ
      - Domain に閉じる（ebook 専用の object 型など） → Domain 側に concept を置いてよい

  - #### ファイル: ebook/v1.0.0/profile.jsonld

```json
{
  "@context": "https://w3id.org/xapi/profiles/context",
  "id": "https://w3id.org/japan-xapi/profiles/ebook",
  "type": "Profile",
  "prefLabel": { "ja": "eBook xAPI Profile" },
  "versions": [
    {
      "id": "https://w3id.org/japan-xapi/profiles/ebook/v1.0.0",
      "generatedAtTime": "2026-04-01"
    }
  ],
  "publisher": {
    "type": "Organization",
    "name": "ICT CONNECT 21 xAPI SWG"
  },

  "concepts": [], // 基本的に空（用語定義はCoreに任せるため）

  // ▼【重要】ここで「既存Verb」と「Core定義Verb」を組み合わせてルールを作る
  "templates": [
    {
      "id": "https://w3id.org/japan-xapi/templates/ebook/viewed-page",
      "inScheme": "https://w3id.org/japan-xapi/profiles/ebook/v1.0.0",
      "prefLabel": { "ja": "ページの閲覧" },
      "definition": {
        "ja": "学習者がeBookの特定のページを開いた時のステートメント形式。"
      },

      // 1. Verbの指定（ADLの既存Verbを参照）
      "verb": "http://adlnet.gov/expapi/verbs/experienced",

      // 2. Objectの指定（ADLの既存ActivityTypeを参照）
      "objectActivityType": "http://adlnet.gov/expapi/activities/page",

      // 3. ルール（必須項目の定義）
      "rules": [
        {
          "location": "result.extensions['https://w3id.org/japan-xapi/extensions/difficulty']",
          "presence": "recommended" // Coreで定義したExtensionの使用を推奨
        }
      ]
    },
    {
      "id": "https://w3id.org/japan-xapi/templates/ebook/highlighting",
      "prefLabel": { "ja": "ハイライト機能の利用" },

      // Coreプロファイルで定義した独自Verbを参照
      "verb": "https://w3id.org/japan-xapi/verbs/highlighted",
      "objectActivityType": "http://adlnet.gov/expapi/activities/media"
    }
  ],

  // テンプレートの順序や構造を定義（オプションだが推奨）
  "patterns": [
    {
      "id": "https://w3id.org/japan-xapi/patterns/ebook/reading-flow",
      "primary": true,
      "sequence": [
        "https://w3id.org/japan-xapi/templates/ebook/viewed-page",
        "https://w3id.org/japan-xapi/templates/ebook/highlighting"
      ]
    }
  ]
}
```

- ## 参考）各プロファイル（profile.jsonld）共通項目
  - 以下の識別とメタ情報については、SWGとして統一の内容とする。
  - 記述内容は後日提示する。
  - 識別とメタ情報
    - profile id（IRI）：Profile 自体の IRI（w3id 推奨）
    - name
    - description
    - version（SemVer）
    - publisher / authors / contributors
      - 田村先生相談）発行者は文科省かiCON SWGか
    - created / modified（または同等の管理情報）
    - license
    - documentation / homepage（人間向け説明のURL）
    - languages
  - バージョン履歴
    - versions セクション
    - 本バージョンの識別子
    - wasRevisionOf（直前版へのリンク）
    - 変更点（changelog / notes）
    - （推奨）互換性メモ：breaking / non-breaking の区別

---
